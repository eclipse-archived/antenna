<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 at 2020-10-13 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20201013" />
    <meta http-equiv="Content-Language" content="en" />
    <title>antenna-documentation &#x2013; How to use Antenna as a Gradle plugin</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
      <script type="text/javascript" src="../js/apache-maven-fluido-1.6.min.js"></script>
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Antenna Documentation</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-10-13<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.0.0-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Overview</li>
    <li><a href="../index.html" title="About"><span class="none"></span>About</a>  </li>
    <li><a href="../getting-started.html" title="Getting started"><span class="none"></span>Getting started</a>  </li>
    <li><a href="../how-to-use.html" title="How to use Antenna"><span class="icon-chevron-down"></span>How to use Antenna</a>
      <ul class="nav nav-list">
    <li><a href="../antenna-cli/index.html" title="Command Line Interface"><span class="none"></span>Command Line Interface</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Gradle Plugin</a>
  </li>
    <li><a href="../antenna-maven-plugin/index.html" title="Maven"><span class="none"></span>Maven</a>  </li>
      </ul>
  </li>
    <li><a href="../troubleshooting.html" title="Troubleshooting"><span class="none"></span>Troubleshooting</a>  </li>
    <li><a href="../compliance-tool/index.html" title="Compliance Tool"><span class="none"></span>Compliance Tool</a>  </li>
    <li><a href="../docker.html" title="Docker"><span class="none"></span>Docker</a>  </li>
          <li class="nav-header">Development</li>
    <li><a href="../how-to-configure.html" title="How to configure Antenna"><span class="icon-chevron-down"></span>How to configure Antenna</a>
      <ul class="nav nav-list">
    <li><a href="../tool-configuration.html" title="Tool Configuration"><span class="none"></span>Tool Configuration</a>  </li>
    <li><a href="../config-configuration.html" title="config.xml"><span class="none"></span>config.xml</a>  </li>
    <li><a href="../workflow-configuration.html" title="Workflow Configuration"><span class="icon-chevron-down"></span>Workflow Configuration</a>
      <ul class="nav nav-list">
    <li><a href="../analyzers/analyzers.html" title="Analyzers"><span class="none"></span>Analyzers</a>  </li>
    <li><a href="../processors/processors.html" title="Processors"><span class="none"></span>Processors</a>  </li>
    <li><a href="../generators/generators.html" title="Generators"><span class="none"></span>Generators</a>  </li>
    <li><a href="../outputHandlers/outputHandlers.html" title="Output Handlers"><span class="none"></span>Output Handlers</a>  </li>
      </ul>
  </li>
      </ul>
  </li>
    <li><a href="../dev-guide.html" title="Development Guide"><span class="none"></span>Development Guide</a>  </li>
    <li><a href="../http-support/index_http.html" title="HTTP Support Library"><span class="none"></span>HTTP Support Library</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>How to use Antenna as a Gradle plugin</h1>
<p>For Gradle, Antenna&#x2019;s tool configuration is contained in an external configuration file, which is expected to have the same format as the plugin configuration of the <tt>antenna-maven-plugin</tt>. Please refer to the documentation of the <a href="../tool-configuration.html">Tool Configuration</a>.</p>
<p>The plugin itself is configured in your <tt>build.gradle</tt> file by adding the following configuration.</p>

<div>
<div>
<pre class="source">buildscript{
    repositories {
        jcenter()
        
    }

    dependencies {
        classpath 'org.eclipse.sw360.antenna:antenna-gradle-plugin:VERSION'
    }
}

plugins {
    id 'java'
}

apply plugin: org.eclipse.sw360.antenna.frontend.gradle.GradlePlugin

tasks.withType(Jar) {
    destinationDir = file(&quot;$rootDir/build&quot;)
}

repositories {
    jcenter()
}

version '1.0-SNAPSHOT'

AntennaConfiguration{
    toolConfigurationPath 'toolConfiguration.xml'
    debugEnabled = false
}
</pre></div></div>

<p>Some additional pointers:</p>
<ul>

<li>For Gradle, Maven is optional. Should you choose to run Antenna without having the maven environment variable <tt>M2_HOME</tt> set, the mvn dependency tree plugin will not work. The result could possibly not include some information that could have been useful. If you choose to run Antenna with Maven, you need to set the maven environment variable (<tt>M2_HOME</tt> should be set to the maven executable) and add</li>
</ul>

<div>
<div>
<pre class="source">&lt;isMavenInstalled&gt;true&lt;/isMavenInstalled&gt;
</pre></div></div>

<p>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;to the Antenna configuration in the toolConfiguration.xml.</p>
<ul>

<li>

<p>All paths must be absolute.</p>
</li>
<li>

<p>For technical reasons variables / properties containing dots or hyphens will in general not be rendered correctly in the toolConfiguration.xml</p>
<ul>

<li>

<p>No Maven variables can be used (except for <tt>project.build.directory</tt>, <tt>project.build.outputDirectory</tt> and <tt>project.basedir</tt>, since they have been added to the context).</p>
</li>
<li>

<p>Properties with a dot in them, like <tt>${system.password}</tt> or hyphen, like <tt>${system-password}</tt> should be changed to <tt>${systemPassword}</tt> in order to be rendered.</p>
</li>
</ul>
</li>
</ul>
<div class="section">
<h2><a name="Adding_workflow_steps_and_plugins"></a>Adding workflow steps and plugins</h2>
<p>It is possible to use workflow steps, knowledge-bases, etc. also if they are not referenced in the assembly. To do this, the jars need to be added as dependencies to the plugin step of Gradle. If you have a custom plugin <tt>my-custom-plugin</tt> with groupId <tt>org.mycompany.plugin</tt>, artifactId <tt>my-custom-plugin</tt> and version <tt>VERSION</tt>, modify the <tt>buildscript</tt> part within <tt>build.gradle</tt> as follows:</p>

<div>
<div>
<pre class="source">buildscript{
    repositories {
        mavenLocal()
        mavenCentral()
    }

    dependencies {
        classpath 'org.eclipse.sw360.antenna:gradle-plugin:VERSION'
        classpath 'org.mycompany.plugin:my-custom-plugin:VERSION'
    }
}
</pre></div></div>
</div>
<div class="section">
<h2><a name="Adding_entry_values_over_a_properties_file_or_environment_variables"></a>Adding entry values over a properties file or environment variables</h2>
<p>Sometimes a workflow step contains entries with variables that are credentials or should remain secret due to other reasons.</p>
<div class="section">
<div class="section">
<h4><a name="Properties_file"></a>Properties file</h4>
<p>For that Antenna provides the possibility to give a properties file that can be stored outside of your project. To use this functionality one can give the properties file in the <tt>AntennaConfiguration</tt> of the build file, like this:</p>

<div>
<div>
<pre class="source">AntennaConfiguration{
    toolConfigurationPath 'toolConfiguration.xml'
    propertiesFilePath '/path/to/antenna.properties'
}
</pre></div></div>

<p>The properties file can be the normal gradle.properties file. It should be written in the standard properties format:</p>

<div>
<div>
<pre class="source">ExampleUsername=maxMustermann
ExamplePassword=12345password
</pre></div></div>

<p>Within your <tt>toolConfiguration.xml</tt> and also the <tt>workflow.xml</tt> you can then reference variables by the usual xml standard <tt>${ExampleUsername}</tt>. This will get rendered by the <tt>TemplateRenderer</tt> according to the value you assigned to the key in the secrets file.</p>
<p>Note: You should still refrain from using key names containing dots, as the <tt>TemplateRenderer</tt> will not render them correctly.</p></div>
<div class="section">
<h4><a name="System_environment_variables"></a>System environment variables</h4>
<p>Additionally you can use system environment variables that you have either set in the environment or when executing the analyze command:</p>

<div>
<div>
<pre class="source">SECRET=password12345 gradle analyze
</pre></div></div>

<p>Should you execute it within the command, the variable will not be saved in your environment but only exist for the run of the command. Antenna adheres to standards and only renders environment variables that are written in upper case letters.</p></div>
<div class="section">
<h4><a name="Note"></a>Note</h4>
<p>As explained in this <a class="externalLink" href="https://blog.gradle.org/decommissioning-http">Gradle blog post</a> a decommissioning of HTTP for Gradle Services started in January 2020. Should your builds fail with the reason &#x201c;HTTPS required&#x201d; it is most likely that you are using a decommissioned URL and need to change it to HTTPS.</p></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2020.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
